digraph BackPaintPattern {
    rankdir=TB; // Top-to-bottom layout
    label="Back Side Paint Pattern (Side 0)\nTCP Path (Simplified Example: 3 Rows)";
    fontsize=14;

    node [shape=ellipse, style=filled, fillcolor=lightblue];
    StartPaint [label="Start Painting Side 0"];
    PaintComplete [label="Painting Complete"];

    node [shape=box, style=filled, fillcolor=lightgrey];
    RotateServos [label="Rotate to 0 deg\nSet Servos for Side 0"];
    MoveZStart [label="Move Z to Paint Height"];
    MoveToStartSweep0 [label="Move TCP to Start Sweep 0\n(Top-Right Corner + Offset)"];
    Sweep0_End [label="End Sweep 0\n(Top-Left + Offset)"];
    MoveToStartSweep1 [label="Move Down by Spacing Y"];
    Sweep1_End [label="End Sweep 1\n(Mid-Left + Offset)"]; // Corrected label - should be Mid-Right
    MoveToStartSweep2 [label="Move Down by Spacing Y"];
    Sweep2_End [label="End Sweep 2\n(Bottom-Left + Offset)"];
    MoveZHome [label="Move Z to 0"];
    MoveXYHome [label="Move XY to (0, 0)"];

    // Edges representing flow
    StartPaint -> RotateServos;
    RotateServos -> MoveZStart;
    MoveZStart -> MoveToStartSweep0;

    // Sweep 0 (Even Row -> Sweep Left)
    MoveToStartSweep0 -> Sweep0_End [label="Sweep Left (X-)", penwidth=2, color=blue];
    { rank=same; MoveToStartSweep0; Sweep0_End; } // Keep sweep ends aligned

    // Move to Sweep 1
    Sweep0_End -> MoveToStartSweep1 [label="Move Down (Y-)", penwidth=1, style=dashed];
    MoveToStartSweep1 -> Sweep1_End [label="Sweep Right (X+)", penwidth=2, color=red];
    { rank=same; MoveToStartSweep1; Sweep1_End; }

    // Move to Sweep 2
    Sweep1_End -> MoveToStartSweep2 [label="Move Down (Y-)", penwidth=1, style=dashed];
    MoveToStartSweep2 -> Sweep2_End [label="Sweep Left (X-)", penwidth=2, color=blue];
    { rank=same; MoveToStartSweep2; Sweep2_End; }

    // End sequence
    Sweep2_End -> MoveZHome [label="Path Finished"];
    MoveZHome -> MoveXYHome;
    MoveXYHome -> PaintComplete;
} 